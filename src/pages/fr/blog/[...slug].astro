---
import { getEntry, render } from 'astro:content';
import BaseLayout from '../../../layouts/BaseLayout.astro';
import Navbar from '../../../components/Navbar.astro';
import Footer from '../../../components/Footer.astro';

const { slug } = Astro.params;
const cleanSlug = typeof slug === 'string' ? slug.replace(/\.md$/, '') : slug;

// Charger le post FR depuis la collection 'blog'
const post = await getEntry('blog', cleanSlug);

if (!post) {
  throw new Error(`Post not found: ${cleanSlug}`);
}

const { Content } = await render(post);
---
<BaseLayout title={post.data.title} description={post.data.description} lang="fr">
  <slot name="navbar">
    <Navbar lang="fr" />
  </slot>

  <h1>{post.data.title}</h1>
  <p>{post.data.date}</p>
  <article>
    <Content />
  </article>

  <slot name="footer">
    <Footer lang="fr" />
  </slot>
</BaseLayout>
