---
import { useLang } from '../i18n/useLang.js';

const { translatedPostUrl } = Astro.props;

const { lang } = Astro.props;
const t = useLang(lang);

const switchLanguageUrl = () => {
  const currentPath = Astro.url.pathname;
  
  if (lang === 'fr') {
    return currentPath.replace(/^\/fr/, '') || '/';
  } else {
    return '/fr' + (currentPath === '/' ? '' : currentPath);
  }
};
---
<div id="burger" class="burger">
  <span></span>
	<span></span>
	<span></span>
</div>
<nav id="nav-links" class="hidden">
	<ul class="nav-list">
		<li><a class="linkEffect linkEffect--insideOut" href={lang === 'fr' ? '/fr/' : '/'}>{t.home}</a></li>
  <li><a class="linkEffect linkEffect--insideOut" href={lang === 'fr' ? '/fr/projects' : '/projects'}>{t.projects}</a></li>
  <li><a class="linkEffect linkEffect--insideOut" href={lang === 'fr' ? '/fr/blog' : '/blog'}>{t.blog}</a></li>
  <li><a class="linkEffect linkEffect--insideOut" href={lang === 'fr' ? '/fr/about' : '/about'}>{t.about}</a></li>
  <li class="lang-toggle-li">
		<a id="lang-toggle" href={translatedPostUrl ?? switchLanguageUrl()}>
			{
			lang === 'fr'
			? <img class="lang-icon" src="/public/USA.svg" alt="Passez en Anglais" width="36" height="24">
			: <img class="lang-icon" src="/public/FRANCE.svg" alt="Switch to FRENCH" width="36" height="24">
			}
		</a>
	</li>
	</ul>
</nav>